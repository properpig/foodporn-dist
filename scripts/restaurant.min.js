!function(){"use strict";function t(){$.getJSON(window.apiUrl+"/restaurant/"+d+"/"+window.username+"/",function(t){n=t.foods,e=t.deals,console.log(t),$(".sub-name").text(t.name),$(".main-div").html(r(t))}).done(function(){$(".follow-button").click(function(a){var o=$(this).data("id");$.getJSON(window.apiUrl+"/restaurant/follow/"+o+"/"+window.username+"/",function(){t()}),$(this).toggleClass("following"),a.stopPropagation()}),$(".menu-items .modal-button").click(function(){i=$(this).data("index"),a(i);var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:$(window).height()/9})}),$(".deal-items .modal-button").click(function(){s=$(this).data("index"),o(s);var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:$(window).height()/9}),$(".close-deals-button").click(function(){$("#modal-"+t+" .modal").animate({marginTop:900},300,function(){$("#modal-"+t).removeClass("open")})})})})}function a(t){var o=0!==t,e=t!==n.length-1;$("#modal-menu-item .modal").html(f({not_first:o,not_last:e,item:n[t]}));var s=$("#modal-menu-item .photo img").width();$("#modal-menu-item .photo img").height(s),$(".controls .right").click(function(t){i!==n.length-1&&(a(++i),t.stopPropagation())}),$(".controls .left").click(function(t){0!==i&&(a(--i),t.stopPropagation())})}function o(t){var a=0!==t,n=t!==e.length-1;$("#modal-deals .modal").html(h({not_first:a,not_last:n,deals:e[t]}));var i=$("#modal-deals .photo img").width();$("#modal-deals .photo img").height(i),$(".controls .right").click(function(t){s!==e.length-1&&(o(++s),t.stopPropagation())}),$(".controls .left").click(function(t){0!==s&&(o(--s),t.stopPropagation())})}var n,i,e,s,l=window.location.search.substring(1),d=l.substring(l.indexOf("=")+1,l.length),m=$("#restaurant-template").html(),r=Handlebars.compile(m),c=$("#menu-template").html(),f=Handlebars.compile(c),u=$("#deals-template").html(),h=Handlebars.compile(u),p=!1;$(".main-div").scroll(function(){var t=-$(".main-photo").offset().top-$(".main-div").offset().top;return t>5?($(".sub-nav").removeClass("hidden"),t>100&&(t=100),$(".sub-nav").css({opacity:t/100}),p||$(".sub-nav").children().each(function(){var t=$(this).data("anchor"),a=$("."+t).offset().top-$(".main-div").offset().top-$(".sub-nav").offset().top;0>a&&($(".sub-nav-item").removeClass("selected"),$(this).addClass("selected"))}),void 0):($(".sub-nav").addClass("hidden"),void 0)}),$(".sub-nav-item").click(function(){$(".sub-nav-item").removeClass("selected"),$(this).addClass("selected");var t=$(this).data("anchor");p=!0,$(".main-div").animate({scrollTop:$("."+t).offset().top-$(".main-photo").offset().top-$(".sub-nav").height()},1e3,function(){p=!1})}),Handlebars.registerHelper("rating_stars",function(t,a){var o,n="";for(o=0;t>o;o++)n+='<i class="fa fa-star"></i>';for(o=0;5-t>o;o++)n+='<i class="fa fa-star-o"></i>';return n+" "+a}),t()}();