!function(){"use strict";function t(){$.getJSON(window.apiUrl+"/restaurant/"+e+"/"+window.username+"/",function(t){n=t.foods,console.log(t),$(".sub-name").text(t.name),$(".main-buttons .full").wrap('<a href="directions.html?id='+t.restaurant_id+'"></a>'),$(".main-div").html(r(t))}).done(function(){$(".follow-button").click(function(a){var n=$(this).data("id");$.getJSON(window.apiUrl+"/restaurant/follow/"+n+"/"+window.username+"/",function(){t()}),$(this).toggleClass("following"),a.stopPropagation()}),$(".modal-button").click(function(){o=$(this).data("index"),a(o);var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:$(window).height()/9})})})}function a(t){var i=0!==t,e=t!==n.length-1;$("#modal-menu-item .modal").html(m({not_first:i,not_last:e,item:n[t]}));var l=$("#modal-menu-item .photo img").width();$("#modal-menu-item .photo img").height(l),$(".controls .right").click(function(t){a(++o),t.stopPropagation()}),$(".controls .left").click(function(t){a(--o),t.stopPropagation()})}var n,o,i=window.location.search.substring(1),e=i.substring(i.indexOf("=")+1,i.length),l=$("#restaurant-template").html(),r=Handlebars.compile(l),s=$("#menu-template").html(),m=Handlebars.compile(s);Handlebars.registerHelper("rating_stars",function(t,a){var n,o="";for(n=0;t>n;n++)o+='<i class="fa fa-star"></i>';for(n=0;5-t>n;n++)o+='<i class="fa fa-star-o"></i>';return o+" "+a}),t()}();