!function(){"use strict";function t(){$.getJSON(window.apiUrl+"/restaurant/"+e+"/"+window.username+"/",function(t){o=t.foods,console.log(t),$(".sub-name").text(t.name),$(".main-div").html(l(t))}).done(function(){$(".follow-button").click(function(a){var o=$(this).data("id");$.getJSON(window.apiUrl+"/restaurant/follow/"+o+"/"+window.username+"/",function(){t()}),$(this).toggleClass("following"),a.stopPropagation()}),$(".modal-button").click(function(){n=$(this).data("index"),a(n);var t=$(this).attr("id");$("#modal-"+t).addClass("open"),$("#modal-"+t+" .modal").animate({marginTop:$(window).height()/9})})})}function a(t){var i=0!==t,e=t!==o.length-1;$("#modal-menu-item .modal").html(d({not_first:i,not_last:e,item:o[t]}));var s=$("#modal-menu-item .photo img").width();$("#modal-menu-item .photo img").height(s),$(".controls .right").click(function(t){n!==o.length-1&&(a(++n),t.stopPropagation())}),$(".controls .left").click(function(t){0!==n&&(a(--n),t.stopPropagation())})}var o,n,i=window.location.search.substring(1),e=i.substring(i.indexOf("=")+1,i.length),s=$("#restaurant-template").html(),l=Handlebars.compile(s),r=$("#menu-template").html(),d=Handlebars.compile(r),c=!1;$(".main-div").scroll(function(){var t=-$(".main-photo").offset().top-$(".main-div").offset().top;return t>5?($(".sub-nav").removeClass("hidden"),t>100&&(t=100),$(".sub-nav").css({opacity:t/100}),c||$(".sub-nav").children().each(function(){var t=$(this).data("anchor"),a=$("."+t).offset().top-$(".main-div").offset().top-$(".sub-nav").offset().top;0>a&&($(".sub-nav-item").removeClass("selected"),$(this).addClass("selected"))}),void 0):($(".sub-nav").addClass("hidden"),void 0)}),$(".sub-nav-item").click(function(){$(".sub-nav-item").removeClass("selected"),$(this).addClass("selected");var t=$(this).data("anchor");c=!0,$(".main-div").animate({scrollTop:$("."+t).offset().top-$(".main-photo").offset().top-$(".sub-nav").height()},1e3,function(){c=!1})}),Handlebars.registerHelper("rating_stars",function(t,a){var o,n="";for(o=0;t>o;o++)n+='<i class="fa fa-star"></i>';for(o=0;5-t>o;o++)n+='<i class="fa fa-star-o"></i>';return n+" "+a}),t()}();