!function(){"use strict";function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}var t=e("type"),n=window.location.search.substring(1);"food"===t?$(".sub-nav-item").eq(0).addClass("selected"):"restaurants"===t?($(".sub-nav-item").eq(1).addClass("selected"),$(".container > .main-buttons").children().toggleClass("hidden")):$(".sub-nav-item").eq(2).addClass("selected"),$("#search").val(e("search")),$.getJSON(window.apiUrl+"/"+t+"/list/"+window.username+"/?"+n,function(e){console.log(e);var n=$("#"+t+"-template").html(),s=Handlebars.compile(n);$(".main-div").html(s(e))}).done(function(){$(".follow-button").click(function(){var e=$(this).data("id"),t=$(this),n=$(this).parent().find(".followers"),s=parseInt(n.text().split(" ")[0]);$.getJSON(window.apiUrl+"/user/follow/"+e+"/"+window.username+"/",function(e){"success"===e.status&&(t.toggleClass("following"),"followed"===e.message?n.text(s+1+" Followers"):n.text(s-1+" Followers"))}),event.stopPropagation()})}),$("#search").keyup(function(e){if(13===e.keyCode){var t=$("#search").val(),s=n.substring(0,n.indexOf("search=")),a=n.substring(n.indexOf("&",s.length),n.length);-1===n.indexOf("&",s.length)&&(a="");var l=s+"search="+t+a;window.location="search-results.html?"+l}})}();